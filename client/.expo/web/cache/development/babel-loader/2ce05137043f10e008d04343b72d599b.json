{"ast":null,"code":"import { USER_LOADED, USER_LOADING, AUTH_ERROR, REGESTER_SUCCESS, REGESTER_FAIL, LOGOUT_SUCCESS, LOGIN_SUCCESS, LOGIN_FAIL } from \"./types\";\nimport { returnErrors } from \"./errorActions\";\nimport axios from 'axios';\nexport var loadUser = function loadUser() {\n  return function (dispatch, getState) {\n    dispatch({\n      type: USER_LOADING\n    });\n    getState().auth.token.then(function (token) {\n      console.log('Token hai yeh: ' + JSON.stringify(token));\n    });\n\n    if (token) {\n      console.log('Token hai yeh: ' + JSON.stringify(token));\n    }\n  };\n};\nexport var register = function register(user) {\n  return function (dispatch) {\n    axios({\n      method: 'post',\n      url: '/api/register',\n      data: user\n    }).then(function (user) {\n      return dispatch({\n        type: REGESTER_SUCCESS,\n        payload: user.data\n      });\n    }).catch(function (err) {\n      console.log(err.response.status);\n      dispatch(returnErrors(err.response.data, err.response.status, 'REGESTER_FAIL'));\n      dispatch({\n        type: REGESTER_FAIL\n      });\n    });\n  };\n};\nexport var logout = function logout() {\n  return {\n    type: LOGOUT_SUCCESS\n  };\n};\nexport var login = function login(user) {\n  return function (dispatch) {\n    axios({\n      method: 'post',\n      url: '/api/auth',\n      data: user\n    }).then(function (user) {\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: user.data\n      });\n    }).catch(function (err) {\n      console.log(err.response.status);\n      dispatch(returnErrors(err.response.data, err.response.status, 'LOGIN_FAIL'));\n      dispatch({\n        type: LOGIN_FAIL\n      });\n    });\n  };\n};","map":{"version":3,"sources":["E:/client/src/actions/authActions.js"],"names":["USER_LOADED","USER_LOADING","AUTH_ERROR","REGESTER_SUCCESS","REGESTER_FAIL","LOGOUT_SUCCESS","LOGIN_SUCCESS","LOGIN_FAIL","returnErrors","axios","loadUser","dispatch","getState","type","auth","token","then","console","log","JSON","stringify","register","user","method","url","data","payload","catch","err","response","status","logout","login"],"mappings":"AAAA,SACIA,WADJ,EAEIC,YAFJ,EAGIC,UAHJ,EAIIC,gBAJJ,EAKIC,aALJ,EAMIC,cANJ,EAOIC,aAPJ,EAQIC,UARJ;AAUA,SAAQC,YAAR;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,OAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAM,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAElDD,IAAAA,QAAQ,CAAC;AAACE,MAAAA,IAAI,EAACZ;AAAN,KAAD,CAAR;AAIAW,IAAAA,QAAQ,GAAGE,IAAX,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2B,UAAAD,KAAK,EAAE;AAACE,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAkBC,IAAI,CAACC,SAAL,CAAeL,KAAf,CAA9B;AAAqD,KAAxF;;AAeA,QAAGA,KAAH,EAAS;AACLE,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAkBC,IAAI,CAACC,SAAL,CAAeL,KAAf,CAA9B;AACH;AAsBJ,GA7CuB;AAAA,CAAjB;AAgDP,OAAO,IAAMM,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD;AAAA,SAAU,UAACX,QAAD,EAAc;AAC5CF,IAAAA,KAAK,CAAC;AACFc,MAAAA,MAAM,EAAE,MADN;AAEFC,MAAAA,GAAG,EAAE,eAFH;AAGFC,MAAAA,IAAI,EAAEH;AAHJ,KAAD,CAAL,CAIKN,IAJL,CAIU,UAAAM,IAAI;AAAA,aAAGX,QAAQ,CAAC;AACtBE,QAAAA,IAAI,EAACV,gBADiB;AAEtBuB,QAAAA,OAAO,EAACJ,IAAI,CAACG;AAFS,OAAD,CAAX;AAAA,KAJd,EAQME,KARN,CAQY,UAAAC,GAAG,EAAI;AACfX,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAG,CAACC,QAAJ,CAAaC,MAAzB;AACAnB,MAAAA,QAAQ,CAACH,YAAY,CAACoB,GAAG,CAACC,QAAJ,CAAaJ,IAAd,EAAoBG,GAAG,CAACC,QAAJ,CAAaC,MAAjC,EAAwC,eAAxC,CAAb,CAAR;AACAnB,MAAAA,QAAQ,CAAC;AACPE,QAAAA,IAAI,EAACT;AADE,OAAD,CAAR;AAEC,KAbL;AAcH,GAfuB;AAAA,CAAjB;AAmBP,OAAO,IAAM2B,MAAM,GAAG,SAATA,MAAS,GAAM;AACxB,SAAO;AACHlB,IAAAA,IAAI,EAACR;AADF,GAAP;AAGH,CAJM;AAOP,OAAO,IAAM2B,KAAK,GAAG,SAARA,KAAQ,CAACV,IAAD;AAAA,SAAU,UAACX,QAAD,EAAc;AACzCF,IAAAA,KAAK,CAAC;AACFc,MAAAA,MAAM,EAAC,MADL;AAEFC,MAAAA,GAAG,EAAC,WAFF;AAGFC,MAAAA,IAAI,EAAEH;AAHJ,KAAD,CAAL,CAIGN,IAJH,CAIQ,UAAAM,IAAI,EAAI;AACZX,MAAAA,QAAQ,CAAC;AACLE,QAAAA,IAAI,EAAEP,aADD;AAELoB,QAAAA,OAAO,EAACJ,IAAI,CAACG;AAFR,OAAD,CAAR;AAIH,KATD,EASGE,KATH,CASS,UAAAC,GAAG,EAAI;AACZX,MAAAA,OAAO,CAACC,GAAR,CAAYU,GAAG,CAACC,QAAJ,CAAaC,MAAzB;AACAnB,MAAAA,QAAQ,CAACH,YAAY,CAACoB,GAAG,CAACC,QAAJ,CAAaJ,IAAd,EAAoBG,GAAG,CAACC,QAAJ,CAAaC,MAAjC,EAAwC,YAAxC,CAAb,CAAR;AACAnB,MAAAA,QAAQ,CAAC;AACLE,QAAAA,IAAI,EAACN;AADA,OAAD,CAAR;AAGH,KAfD;AAgBH,GAjBoB;AAAA,CAAd","sourcesContent":["import { \r\n    USER_LOADED, \r\n    USER_LOADING,\r\n    AUTH_ERROR,\r\n    REGESTER_SUCCESS,\r\n    REGESTER_FAIL,\r\n    LOGOUT_SUCCESS,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL\r\n} from './types';\r\nimport {returnErrors} from './errorActions'\r\nimport axios from 'axios';\r\n// import { AsyncStorage } from 'react-native';\r\n\r\nexport const loadUser = () => (dispatch, getState) => {\r\n    //user loading\r\n    dispatch({type:USER_LOADING})\r\n\r\n    //get token from local storage\r\n    // const token = getState().auth.token;\r\n    getState().auth.token.then(token=>{console.log('Token hai yeh: '+JSON.stringify(token))})\r\n    // var token;\r\n    // getdata = async () => {\r\n    //     try {\r\n    //       await getState().auth.token\r\n    //       token = getState().auth.token;\r\n    //       console.log(\"token: \"+JSON.stringify(token))\r\n    //     } catch (e) {\r\n    //       // saving error\r\n    //       console.log(\"err\")\r\n    //     }\r\n    //   }\r\n\r\n    // console.log(JSON.stringify(token))\r\n\r\n    if(token){\r\n        console.log('Token hai yeh: '+JSON.stringify(token))\r\n    }\r\n    // //headers\r\n    // const config = {\r\n    //     headers:{\r\n    //         \"Contect-type\":\"application/json\"\r\n    //     }\r\n    // }\r\n    // if(token){\r\n    //     config.headers['x-auth-token'] = token;\r\n    // }\r\n\r\n    // axios.get('/api/auth/user', config)\r\n    //     .then( res => dispatch({\r\n    //         type:USER_LOADED,\r\n    //         payload:res.data\r\n    //     }))\r\n    //     .catch( err => {\r\n    //         dispatch(returnErrors(err.response.data, err.response.status))\r\n    //         dispatch({\r\n    //         type:AUTH_ERROR\r\n    //         })\r\n    //     })\r\n}\r\n\r\n// Sign up\r\nexport const register = (user) => (dispatch) => {\r\n    axios({\r\n        method: 'post',\r\n        url: '/api/register',\r\n        data: user\r\n      }).then(user =>dispatch({\r\n        type:REGESTER_SUCCESS,\r\n        payload:user.data\r\n        // console.log(user)\r\n      })).catch(err => {\r\n        console.log(err.response.status)\r\n        dispatch(returnErrors(err.response.data, err.response.status,'REGESTER_FAIL'));\r\n        dispatch({\r\n          type:REGESTER_FAIL\r\n      })})\r\n}\r\n\r\n//Log out\r\n\r\nexport const logout = () => {\r\n    return {\r\n        type:LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\n//Login\r\nexport const login = (user) => (dispatch) => {\r\n    axios({\r\n        method:'post',\r\n        url:'/api/auth',\r\n        data: user\r\n    }).then(user => {\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload:user.data\r\n        })\r\n    }).catch(err => {\r\n        console.log(err.response.status)\r\n        dispatch(returnErrors(err.response.data, err.response.status,'LOGIN_FAIL'));\r\n        dispatch({\r\n            type:LOGIN_FAIL\r\n        })\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}