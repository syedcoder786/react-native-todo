{"ast":null,"code":"import { FETCH_TODOS, TODOS_LOADING, TODOS_LOADED, ADD_TODO } from \"./types\";\nimport axios from 'axios';\nimport { returnErrors } from \"./errorActions\";\nvar x = 0,\n    y;\nexport var fetchTodos = function fetchTodos() {\n  return function (dispatch) {\n    if (x === 0) {\n      dispatch({\n        type: TODOS_LOADING\n      });\n    }\n\n    axios.get('https://todo-reactnative-server.herokuapp.com/api/fetchTodos').then(function (todos) {\n      if (x === 0) {\n        dispatch({\n          type: TODOS_LOADED\n        });\n        dispatch({\n          type: FETCH_TODOS,\n          payload: todos.data\n        });\n        x = 1;\n        y = todos.data.length;\n      } else if (y !== todos.data.length) {\n        console.log(y);\n        axios.get('https://todo-reactnative-server.herokuapp.com/api/fetchTodos').then(function (todos) {\n          dispatch({\n            type: FETCH_TODOS,\n            payload: todos.data\n          });\n        });\n        y = todos.data.length;\n      }\n    });\n  };\n};\nexport var addTodo = function addTodo(todo) {\n  return function (dispatch) {\n    dispatch({\n      type: ADD_TODO\n    });\n    axios({\n      method: 'post',\n      url: 'https://todo-reactnative-server.herokuapp.com/api/addTodo',\n      data: todo\n    }).then(function (todo) {\n      console.log(todo.data);\n    }).catch(function (err) {\n      console.log(err.response.status);\n      dispatch(returnErrors(err.response.data, err.response.status, 'ERROR_TODO'));\n    });\n  };\n};\nexport var deleteTodo = function deleteTodo(id) {\n  axios({\n    method: 'post',\n    url: 'https://todo-reactnative-server.herokuapp.com/api/deleteTodo',\n    data: id\n  }).then(console.log('deleted')).catch(function (err) {\n    console.log(err.response.status);\n  });\n};","map":{"version":3,"sources":["E:/reat-native-todo/client/src/actions/todosActions.js"],"names":["FETCH_TODOS","TODOS_LOADING","TODOS_LOADED","ADD_TODO","axios","returnErrors","x","y","fetchTodos","dispatch","type","get","then","todos","payload","data","length","console","log","addTodo","todo","method","url","catch","err","response","status","deleteTodo","id"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,aAAtB,EAAqCC,YAArC,EAAmDC,QAAnD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,YAAR;AAEA,IAAIC,CAAC,GAAC,CAAN;AAAA,IAAQC,CAAR;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAM,UAAAC,QAAQ,EAAI;AACxC,QAAGH,CAAC,KAAG,CAAP,EAAS;AACPG,MAAAA,QAAQ,CAAC;AAAEC,QAAAA,IAAI,EAACT;AAAP,OAAD,CAAR;AACD;;AAGDG,IAAAA,KAAK,CAACO,GAAN,CAAU,8DAAV,EACGC,IADH,CACQ,UAAAC,KAAK,EAAI;AACb,UAAGP,CAAC,KAAG,CAAP,EAAS;AAELG,QAAAA,QAAQ,CAAC;AAAEC,UAAAA,IAAI,EAACR;AAAP,SAAD,CAAR;AACAO,QAAAA,QAAQ,CAAC;AACLC,UAAAA,IAAI,EAACV,WADA;AAELc,UAAAA,OAAO,EAACD,KAAK,CAACE;AAFT,SAAD,CAAR;AAIAT,QAAAA,CAAC,GAAC,CAAF;AACAC,QAAAA,CAAC,GAACM,KAAK,CAACE,IAAN,CAAWC,MAAb;AACH,OATD,MASM,IAAGT,CAAC,KAAKM,KAAK,CAACE,IAAN,CAAWC,MAApB,EAA2B;AAC/BC,QAAAA,OAAO,CAACC,GAAR,CAAYX,CAAZ;AAEQH,QAAAA,KAAK,CAACO,GAAN,CAAU,8DAAV,EACGC,IADH,CACQ,UAAAC,KAAK,EAAI;AAEbJ,UAAAA,QAAQ,CAAC;AACPC,YAAAA,IAAI,EAAEV,WADC;AAEPc,YAAAA,OAAO,EAAED,KAAK,CAACE;AAFR,WAAD,CAAR;AAIH,SAPD;AAQAR,QAAAA,CAAC,GAACM,KAAK,CAACE,IAAN,CAAWC,MAAb;AAET;AACF,KAzBH;AA2BH,GAjCyB;AAAA,CAAnB;AAmCP,OAAO,IAAMG,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD;AAAA,SAAU,UAAAX,QAAQ,EAAG;AAC1CA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAACP;AAAP,KAAD,CAAR;AAEAC,IAAAA,KAAK,CAAC;AACFiB,MAAAA,MAAM,EAAC,MADL;AAGFC,MAAAA,GAAG,EAAC,2DAHF;AAIFP,MAAAA,IAAI,EAAEK;AAJJ,KAAD,CAAL,CAKGR,IALH,CAKQ,UAAAQ,IAAI,EAAI;AACZH,MAAAA,OAAO,CAACC,GAAR,CAAYE,IAAI,CAACL,IAAjB;AACL,KAPC,EAOCQ,KAPD,CAOO,UAAAC,GAAG,EAAE;AACZP,MAAAA,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACC,QAAJ,CAAaC,MAAzB;AACAjB,MAAAA,QAAQ,CAACJ,YAAY,CAACmB,GAAG,CAACC,QAAJ,CAAaV,IAAd,EAAoBS,GAAG,CAACC,QAAJ,CAAaC,MAAjC,EAAwC,YAAxC,CAAb,CAAR;AAID,KAbC;AAcD,GAjBsB;AAAA,CAAhB;AAoBP,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD,EAAQ;AAEhCxB,EAAAA,KAAK,CAAC;AACJiB,IAAAA,MAAM,EAAC,MADH;AAGJC,IAAAA,GAAG,EAAC,8DAHA;AAIJP,IAAAA,IAAI,EAAEa;AAJF,GAAD,CAAL,CAKKhB,IALL,CAMMK,OAAO,CAACC,GAAR,CAAY,SAAZ,CANN,EAOIK,KAPJ,CAOU,UAAAC,GAAG,EAAE;AACbP,IAAAA,OAAO,CAACC,GAAR,CAAYM,GAAG,CAACC,QAAJ,CAAaC,MAAzB;AAKC,GAbH;AAcD,CAhBM","sourcesContent":["import { FETCH_TODOS, TODOS_LOADING, TODOS_LOADED, ADD_TODO, } from './types';\r\nimport axios from 'axios';\r\nimport {returnErrors} from './errorActions'\r\n\r\nvar x=0,y;\r\n\r\nexport const fetchTodos = () => dispatch => {\r\n    if(x===0){\r\n      dispatch({ type:TODOS_LOADING })\r\n    }\r\n    // console.log(\"actions ke andar\")\r\n    // axios.get('http://localhost:5000/api/fetchReviews')\r\n    axios.get('https://todo-reactnative-server.herokuapp.com/api/fetchTodos')\r\n      .then(todos => {\r\n        if(x===0){\r\n        // console.log(reviews.data)\r\n            dispatch({ type:TODOS_LOADED })\r\n            dispatch({\r\n                type:FETCH_TODOS,\r\n                payload:todos.data\r\n            })\r\n            x=1;\r\n            y=todos.data.length;\r\n        }else if(y !== todos.data.length){\r\n          console.log(y)\r\n                  // axios.get('http://localhost:5000/api/fetchReviews')\r\n                  axios.get('https://todo-reactnative-server.herokuapp.com/api/fetchTodos')\r\n                    .then(todos => {\r\n                      // dispatch({type:POST_LOADED})\r\n                      dispatch({\r\n                        type: FETCH_TODOS,\r\n                        payload: todos.data\r\n                      })\r\n                  })\r\n                  y=todos.data.length;\r\n                  // console.log('secound')\r\n        }\r\n      })\r\n      \r\n};\r\n\r\nexport const addTodo = (todo) => dispatch =>{\r\n  dispatch({ type:ADD_TODO })\r\n  // console.log(\"inside post\")\r\n  axios({\r\n      method:'post',\r\n      // url:'http://localhost:5000/api/addReview',\r\n      url:'https://todo-reactnative-server.herokuapp.com/api/addTodo',\r\n      data: todo\r\n  }).then(todo => {\r\n      console.log(todo.data)\r\n}).catch(err=>{\r\n  console.log(err.response.status)\r\n  dispatch(returnErrors(err.response.data, err.response.status,'ERROR_TODO'));\r\n//   dispatch({\r\n//     type:REGESTER_FAIL\r\n// })\r\n})\r\n}\r\n\r\n// delete Todo\r\nexport const deleteTodo = (id) => {\r\n  // dispatch({ type:DELETE_TODO })\r\n  axios({\r\n    method:'post',\r\n    // url:'http://localhost:5000/api/addReview',\r\n    url:'https://todo-reactnative-server.herokuapp.com/api/deleteTodo',\r\n    data: id\r\n    }).then(\r\n        console.log('deleted')\r\n    ).catch(err=>{\r\n    console.log(err.response.status)\r\n    // dispatch(returnErrors(err.response.data, err.response.status,'ERROR_TODO'));\r\n    //   dispatch({\r\n    //     type:REGESTER_FAIL\r\n    // })\r\n    })\r\n}\r\n"]},"metadata":{},"sourceType":"module"}