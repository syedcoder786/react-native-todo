{"ast":null,"code":"import { USER_LOADED, USER_LOADING, AUTH_ERROR, REGESTER_SUCCESS, REGESTER_FAIL, LOGOUT_SUCCESS, LOGIN_SUCCESS, LOGIN_FAIL } from \"./types\";\nimport { returnErrors } from \"./errorActions\";\nimport axios from 'axios';\nexport var loadUser = function loadUser() {\n  return function (dispatch, getState) {\n    dispatch({\n      type: USER_LOADING\n    });\n    var token = getState().auth.token;\n    var config = {\n      headers: {\n        \"Contect-type\": \"application/json\"\n      }\n    };\n\n    if (token) {\n      config.headers['x-auth-token'] = token;\n    }\n\n    axios.get('/api/auth/user', config).then(function (res) {\n      return dispatch({\n        type: USER_LOADED,\n        payload: res.data\n      });\n    }).catch(function (err) {\n      dispatch(returnErrors(err.response.data, err.response.status));\n      dispatch({\n        type: AUTH_ERROR\n      });\n    });\n  };\n};\nexport var register = function register(user) {\n  return function (dispatch) {\n    axios({\n      method: 'post',\n      url: '/api/register',\n      data: user\n    }).then(function (user) {\n      return dispatch({\n        type: REGESTER_SUCCESS,\n        payload: user.data\n      });\n    }).catch(function (err) {\n      console.log(err.response.status);\n      dispatch(returnErrors(err.response.data, err.response.status, 'REGESTER_FAIL'));\n      dispatch({\n        type: REGESTER_FAIL\n      });\n    });\n  };\n};\nexport var logout = function logout() {\n  return {\n    type: LOGOUT_SUCCESS\n  };\n};\nexport var login = function login(user) {\n  return function (dispatch) {\n    axios({\n      method: 'post',\n      url: '/api/auth',\n      data: user\n    }).then(function (user) {\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: user.data\n      });\n    }).catch(function (err) {\n      console.log(err.response.status);\n      dispatch(returnErrors(err.response.data, err.response.status, 'LOGIN_FAIL'));\n      dispatch({\n        type: LOGIN_FAIL\n      });\n    });\n  };\n};","map":{"version":3,"sources":["E:/client/src/actions/authActions.js"],"names":["USER_LOADED","USER_LOADING","AUTH_ERROR","REGESTER_SUCCESS","REGESTER_FAIL","LOGOUT_SUCCESS","LOGIN_SUCCESS","LOGIN_FAIL","returnErrors","axios","loadUser","dispatch","getState","type","token","auth","config","headers","get","then","res","payload","data","catch","err","response","status","register","user","method","url","console","log","logout","login"],"mappings":"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","sourcesContent":["import { \r\n    USER_LOADED, \r\n    USER_LOADING,\r\n    AUTH_ERROR,\r\n    REGESTER_SUCCESS,\r\n    REGESTER_FAIL,\r\n    LOGOUT_SUCCESS,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL\r\n} from './types';\r\nimport {returnErrors} from './errorActions'\r\nimport axios from 'axios';\r\n\r\nexport const loadUser = () => (dispatch, getState) => {\r\n    //user loading\r\n    dispatch({type:USER_LOADING})\r\n\r\n    //get token from local storage\r\n    const token = getState().auth.token;\r\n\r\n    //headers\r\n    const config = {\r\n        headers:{\r\n            \"Contect-type\":\"application/json\"\r\n        }\r\n    }\r\n    if(token){\r\n        config.headers['x-auth-token'] = token;\r\n    }\r\n\r\n    axios.get('/api/auth/user', config)\r\n        .then( res => dispatch({\r\n            type:USER_LOADED,\r\n            payload:res.data\r\n        }))\r\n        .catch( err => {\r\n            dispatch(returnErrors(err.response.data, err.response.status))\r\n            dispatch({\r\n            type:AUTH_ERROR\r\n            })\r\n        })\r\n}\r\n\r\n// Sign up\r\nexport const register = (user) => (dispatch) => {\r\n    axios({\r\n        method: 'post',\r\n        url: '/api/register',\r\n        data: user\r\n      }).then(user =>dispatch({\r\n        type:REGESTER_SUCCESS,\r\n        payload:user.data\r\n        // console.log(user)\r\n      })).catch(err => {\r\n        console.log(err.response.status)\r\n        dispatch(returnErrors(err.response.data, err.response.status,'REGESTER_FAIL'));\r\n        dispatch({\r\n          type:REGESTER_FAIL\r\n      })})\r\n}\r\n\r\n//Log out\r\n\r\nexport const logout = () => {\r\n    return {\r\n        type:LOGOUT_SUCCESS\r\n    }\r\n}\r\n\r\n//Login\r\nexport const login = (user) => (dispatch) => {\r\n    axios({\r\n        method:'post',\r\n        url:'/api/auth',\r\n        data: user\r\n    }).then(user => {\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload:user.data\r\n        })\r\n    }).catch(err => {\r\n        console.log(err.response.status)\r\n        dispatch(returnErrors(err.response.data, err.response.status,'LOGIN_FAIL'));\r\n        dispatch({\r\n            type:LOGIN_FAIL\r\n        })\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}